
<div id=loadWait>
    <mat-spinner></mat-spinner>
</div>
<div class="toolbar" role="banner">
    
    <img (click)="home()" id="logo-img" alt="Logo" src="assets/images/logo.jpg"/>
    <span id=title>ETANMASK</span>
    <div class="spacer"></div>
    <div class=rightside>
        <div class=uppart>
            <span>Connecté en tant que {{username}}</span>
            <i (click)="logout()" class="fas fa-sign-out-alt"></i>
        </div>
        <div *ngIf="statut!='3'" class=downpart>
            <!--fileupload.click()-->
            <div class="add" (click)="popup=true">
                <img id="plus-img" alt="plus" src="assets/images/plus.png"/>  
                <span>Importer une intervention</span>
            </div>
            <a routerLink="/users">
                <div *ngIf="statut=='1'" class="users">
                    <img id="users" alt="users" src="assets/images/user.png" />
                </div>
            </a>
        </div>
    </div>       
</div>
<div class="dark-background" *ngIf="popup==true">
    <div id="addPopup">
        <div class=popupHeader>
        <i (click)="closePopup()" class="fas fa-times-circle"></i>
            Ajouter une intervention
        </div>
        <div class=popupBody>
        <form id=form-container class=form-container (ngSubmit)=onSubmit(f) #f=ngForm>
            <div class="champ" id="date">Date de l'intervention<input type=date name=date [(ngModel)]=date /></div><br>
            <div class="champ" id="localisation">Localisation<input type=text name=localisation [(ngModel)]=localisation /></div><br>
            <div class="champ" id="classefeu">Classe de feu 
                <select name=classefeu [(ngModel)]=classefeu>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                </select> 
            </div>
            <br>
            <div class="champ" id="nbmasque" (change)="changenbmasque()">Nombre de masques<input type=number min=2 name=nbmasque [(ngModel)]=nbmasque /></div>
            <br>
            <fieldset>
                <legend>Masques</legend>
                <span>Ajoutez les fichiers de données .csv de l'intervention</span><br><br>
                <input id=my-file{{i}} *ngFor="let i of nbmasquelist()" class=input-file type=file accept=".csv" (change)=importData($event,i) />
                <div class=labelinput *ngFor="let i of nbmasquelist()">
                    <select name=barbe (change)="changebarbe(i)">
                        <option value=true>Avec barbe</option>
                        <option value=false>Sans barbe</option>
                    </select>
                    <label for=my-file{{i}} class=input-file-trigger> Choisir un fichier</label>
                    <span id=name-file{{i}}></span>
                </div>
            </fieldset>
            <div>
                <button type=submit class="save btn" (click)="submit=true">Ajouter</button>
                <button type=button class=btn (click)="closePopup()">Annuler</button>
            </div>
        </form>
        <p *ngIf="alert==true" class=alert>{{msgAlert}}</p>
        </div>
    </div>
</div>

